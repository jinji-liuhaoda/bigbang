{% extends 'shiling/base.html' %}
{% block mainbody %}
<form role="form" method="POST" enctype="multipart/form-data" id="formid">
		{% csrf_token %}
	<div class="sign-in">
		<div class="sign-in-info">
			<ul>
				<li>
					<input type="text" name="phone" id="phone" placeholder="手机号" class="text-style" />
				</li>
				<li>
					<input type="text" name="pwd" id="pwd" placeholder="密码" class="text-style" />
				</li>
			</ul>
		</div>
		<div class="provide-btn">
			<div class="button03">
				<a id="login"><h3>登录</h3></a>
			</div>
			<div class="button01">
				<a href="/register"><h3>注册</h3></a>
			</div>
			<div class="button04">
				<a href="/wxlogin"><h3>微信登录</h3></a>
			</div>
		</div>
		<div class="key">
			<ul>
				<li class="left">
					<input type="radio"/>记住密码					
				</li>
				<li class="right">
					<span>忘记密码?</span>					
				</li>
			</ul>
		</div>
	</div>
</form>
{% endblock %}
{% block script %}
<script>
	if ({{error_msg}}) {
		alert("用户名或密码错误")
	}
</script>
<script>
	$(function(){
		//验证手机号码
	    var checkphone = function(phone){
			 var reg = /^0?1[3|4|5|8][0-9]\d{8}$/;
			 if (reg.test(phone)) {
			      return true;
			 }else{
			      return false;
			 }
	    }
		var login_status = function(){
			var phone = $("#phone").val()
			var pwd = $("#pwd").val()
			if (phone && pwd) {
				$("#login").parent().removeClass('button03')
				$("#login").parent().addClass('button01')
			}else{
				$("#login").parent().addClass('button03')
				$("#login").parent().removeClass('button01')
			}
		}
		setInterval(login_status,50)
		$("#login").on('click',function(){
			var phone = $("#phone").val()
			var pwd = $("#pwd").val()
			if (!phone || !pwd) {
				alert("请输入完整信息")
				return false
			}
			if (!checkphone(phone)) {
				alert("请输入正确手机号")
				return false
			}
			$("#formid").submit()

		})
	})
</script>
{% endblock %}